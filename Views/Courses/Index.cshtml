@model List<StudentDashboard.Models.Course>
@{
    ViewData["Title"] = "Courses";
}

<div class="courses-container">
    <div class="courses-header">
        <h1>My Courses</h1>
        <div class="courses-filters">
            <select id="statusFilter" class="filter-select">
                <option value="all">All Courses</option>
                <option value="active">Active</option>
                <option value="completed">Completed</option>
                <option value="upcoming">Upcoming</option>
            </select>
            <button class="btn-primary" onclick="showEnrollModal()">
                <i class="fas fa-plus"></i>
                Enroll in Course
            </button>
        </div>
    </div>

    <div class="courses-grid">
        @foreach (var course in Model)
        {
            <div class="course-card" data-status="@(course.IsActive ? "active" : "completed")">
                <div class="course-header">
                    <div class="course-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="course-status @(course.IsActive ? "active" : "completed")">
                        @(course.IsActive ? "Active" : "Completed")
                    </div>
                </div>
                
                <div class="course-content">
                    <h3>@course.Name</h3>
                    <p class="course-code">@course.Code</p>
                    <p class="course-description">@course.Description</p>
                    
                    <div class="course-details">
                        <div class="detail-item">
                            <i class="fas fa-clock"></i>
                            <span>@course.Duration months</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-users"></i>
                            <span>@course.Format</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-star"></i>
                            <span>@course.Level</span>
                        </div>
                    </div>

                    <div class="course-progress">
                        <div class="progress-header">
                            <span>Progress</span>
                            <span class="progress-percentage">75%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%"></div>
                        </div>
                    </div>

                    <div class="course-actions">
                        <button class="btn-secondary" onclick="viewCourseDetails(@course.Id)">
                            <i class="fas fa-eye"></i>
                            View Details
                        </button>
                        <button class="btn-primary" onclick="enterCourse(@course.Id)">
                            <i class="fas fa-play"></i>
                            Enter Course
                        </button>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

<!-- Course Details Modal -->
<div id="courseModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modalTitle">Course Details</h2>
            <button class="modal-close" onclick="closeModal()">&times;</button>
        </div>
        <div class="modal-body" id="modalBody">
            <!-- Course details will be loaded here -->
        </div>
        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeModal()">Close</button>
            <button class="btn-primary" id="modalAction">Enroll</button>
        </div>
    </div>
</div>

<!-- Enroll Modal -->
<div id="enrollModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Enroll in New Course</h2>
            <button class="modal-close" onclick="closeEnrollModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="available-courses">
                <div class="course-option" onclick="selectCourse('UX101', 'UX/UI Design Fundamentals')">
                    <div class="course-option-icon">
                        <i class="fas fa-palette"></i>
                    </div>
                    <div class="course-option-info">
                        <h4>UX/UI Design Fundamentals</h4>
                        <p>Learn the basics of user experience and interface design</p>
                        <span class="course-option-duration">6 months • Online</span>
                    </div>
                </div>
                
                <div class="course-option" onclick="selectCourse('WEB102', 'Full Stack Web Development')">
                    <div class="course-option-icon">
                        <i class="fas fa-code"></i>
                    </div>
                    <div class="course-option-info">
                        <h4>Full Stack Web Development</h4>
                        <p>Master frontend and backend development technologies</p>
                        <span class="course-option-duration">8 months • Online</span>
                    </div>
                </div>
                
                <div class="course-option" onclick="selectCourse('DATA103', 'Data Science & Analytics')">
                    <div class="course-option-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div class="course-option-info">
                        <h4>Data Science & Analytics</h4>
                        <p>Learn data analysis, machine learning, and visualization</p>
                        <span class="course-option-duration">10 months • Online</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeEnrollModal()">Cancel</button>
            <button class="btn-primary" onclick="enrollInCourse()" disabled id="enrollBtn">Enroll</button>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        let selectedCourse = null;

        // Filter courses
        document.getElementById('statusFilter').addEventListener('change', function() {
            const filter = this.value;
            const courseCards = document.querySelectorAll('.course-card');
            
            courseCards.forEach(card => {
                if (filter === 'all' || card.dataset.status === filter) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // Show course details modal
        function viewCourseDetails(courseId) {
            // In a real application, you would fetch course details from the API
            document.getElementById('modalTitle').textContent = 'UX/UI Design';
            document.getElementById('modalBody').innerHTML = `
                <div class="course-detail-content">
                    <div class="course-detail-section">
                        <h4>Course Information</h4>
                        <p><strong>Code:</strong> UX101</p>
                        <p><strong>Duration:</strong> 6 months</p>
                        <p><strong>Format:</strong> Online</p>
                        <p><strong>Level:</strong> Basic</p>
                        <p><strong>Instructor:</strong> John Smith</p>
                    </div>
                    <div class="course-detail-section">
                        <h4>Description</h4>
                        <p>Learn the fundamentals of user experience and interface design. This comprehensive course covers design principles, user research, prototyping, and modern design tools.</p>
                    </div>
                    <div class="course-detail-section">
                        <h4>Curriculum</h4>
                        <ul>
                            <li>Introduction to UX/UI Design</li>
                            <li>User Research Methods</li>
                            <li>Wireframing and Prototyping</li>
                            <li>Visual Design Principles</li>
                            <li>Design Systems</li>
                            <li>Usability Testing</li>
                        </ul>
                    </div>
                </div>
            `;
            document.getElementById('modalAction').textContent = 'Enroll';
            document.getElementById('courseModal').style.display = 'block';
        }

        // Enter course
        function enterCourse(courseId) {
            // In a real application, this would redirect to the course content
            showNotification('Entering course...', 'info');
        }

        // Show enroll modal
        function showEnrollModal() {
            document.getElementById('enrollModal').style.display = 'block';
        }

        // Close modals
        function closeModal() {
            document.getElementById('courseModal').style.display = 'none';
        }

        function closeEnrollModal() {
            document.getElementById('enrollModal').style.display = 'none';
            selectedCourse = null;
            document.getElementById('enrollBtn').disabled = true;
        }

        // Select course for enrollment
        function selectCourse(code, name) {
            // Remove previous selection
            document.querySelectorAll('.course-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Add selection to clicked option
            event.currentTarget.classList.add('selected');
            
            selectedCourse = { code, name };
            document.getElementById('enrollBtn').disabled = false;
        }

        // Enroll in course
        function enrollInCourse() {
            if (selectedCourse) {
                showNotification(`Successfully enrolled in ${selectedCourse.name}!`, 'success');
                closeEnrollModal();
            }
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            const courseModal = document.getElementById('courseModal');
            const enrollModal = document.getElementById('enrollModal');
            
            if (event.target === courseModal) {
                closeModal();
            }
            if (event.target === enrollModal) {
                closeEnrollModal();
            }
        }
    </script>
}
